# ğŸ›ï¸ HAFAN - Sovereign AI Gateway

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        dragon403.com                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  TITAN V18   â”‚  â”‚  Dragon403   â”‚  â”‚   Comet-X    â”‚   FRONTENDS  â”‚
â”‚  â”‚  (Console)   â”‚  â”‚   (OSINT)    â”‚  â”‚   (Brain)    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                 â”‚                 â”‚                       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                           â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                    â”‚    HAFAN     â”‚  â† Sovereign Gateway            â”‚
â”‚                    â”‚   FastAPI    â”‚                                 â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                           â”‚                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚         â”‚                 â”‚                 â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Hafan-Core  â”‚  â”‚ Hafan-Ledger â”‚  â”‚Hafan-Gateway â”‚   MODULES    â”‚
â”‚  â”‚   (AI API)   â”‚  â”‚   (Legal)    â”‚  â”‚  (Payment)   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                 â”‚                 â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Azure AI    â”‚  â”‚   Cosmos DB  â”‚  â”‚   Moyasar    â”‚   EXTERNAL
   â”‚  DeepSeek    â”‚  â”‚   Evidence   â”‚  â”‚   Tap/STC    â”‚   SERVICES
   â”‚  Llama/GPT   â”‚  â”‚   Storage    â”‚  â”‚   Apple Pay  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Ø§Ù„Ù…Ù‡Ù…Ø©

Hafan = Ø¹Ù‚Ù„ GraTech Ø§Ù„Ø³ÙŠØ§Ø¯ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ­Ù…ÙŠ Ù‡ÙˆÙŠØªÙƒ ÙˆÙŠÙˆØ«Ù‚ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ§Ù‹

## ğŸ“ Ø§Ù„Ù‡ÙŠÙƒÙ„

```
Hafan/
â”œâ”€â”€ main.py                 # FastAPI Entry Point
â”œâ”€â”€ config.py               # Environment & Settings
â”œâ”€â”€ requirements.txt        # Dependencies
â”‚
â”œâ”€â”€ core/                   # Hafan-Core (AI)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ router.py          # /api/v1/ai/*
â”‚   â”œâ”€â”€ models.py          # AI Model configs
â”‚   â””â”€â”€ sovereign_ai.py    # Multi-model orchestration
â”‚
â”œâ”€â”€ ledger/                 # Hafan-Ledger (Legal)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ router.py          # /api/v1/ledger/*
â”‚   â”œâ”€â”€ evidence.py        # Evidence management
â”‚   â””â”€â”€ timeline.py        # Case timeline
â”‚
â”œâ”€â”€ gateway/                # Hafan-Gateway (Payment)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ router.py          # /api/v1/pay/*
â”‚   â”œâ”€â”€ moyasar.py         # Saudi payment
â”‚   â””â”€â”€ subscription.py    # SaaS billing
â”‚
â””â”€â”€ shared/                 # Shared utilities
    â”œâ”€â”€ auth.py            # Authentication
    â”œâ”€â”€ database.py        # DB connection
    â””â”€â”€ middleware.py      # CORS, logging
```

## ğŸš€ Ø§Ù„ØªØ´ØºÙŠÙ„

```bash
cd Hafan
pip install -r requirements.txt
uvicorn main:app --reload --port 8000
```

## ğŸ”— Ø§Ù„Ù€ APIs

| Endpoint | Ø§Ù„ÙˆØµÙ |
|----------|-------|
| `POST /api/v1/ai/chat` | Ù…Ø­Ø§Ø¯Ø«Ø© AI (DeepSeek/Llama/GPT) |
| `POST /api/v1/ai/tts` | ØªØ­ÙˆÙŠÙ„ Ù†Øµ Ù„ØµÙˆØª Ø¹Ø±Ø¨ÙŠ |
| `POST /api/v1/ai/image` | ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ± DALL-E |
| `GET /api/v1/ledger/cases` | Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ |
| `POST /api/v1/ledger/evidence` | Ø¥Ø¶Ø§ÙØ© Ø¯Ù„ÙŠÙ„ |
| `GET /api/v1/ledger/timeline/{case_id}` | ØªØ§ÙŠÙ…Ù„Ø§ÙŠÙ† Ø§Ù„Ù‚Ø¶ÙŠØ© |
| `POST /api/v1/pay/checkout` | Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¯ÙØ¹ |
| `POST /api/v1/pay/webhook` | Ø§Ø³ØªÙ„Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¯ÙØ¹ |

## ğŸ” Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```env
# Azure AI
AZURE_OPENAI_ENDPOINT=https://dragon403-openai.openai.azure.com
AZURE_OPENAI_KEY=xxx
AZURE_DEEPSEEK_ENDPOINT=https://dragon403-deepseek.services.ai.azure.com
AZURE_DEEPSEEK_KEY=xxx

# Payment (Saudi)
MOYASAR_API_KEY=xxx
MOYASAR_PUBLISHABLE_KEY=xxx

# Database
COSMOS_CONNECTION_STRING=xxx
```
